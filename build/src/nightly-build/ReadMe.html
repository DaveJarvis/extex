<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>The ExTeX Build System</title>
  <meta name="Author" content="Gerd Neugebauer">
  <style>
body {
  background-color:white;
  font-family:sans-serif;
  margin-left:150px;
  margin-right:2em;
  background: url(../images/side.png) repeat-y;
}
.e {
  text-transform:uppercase;
  font-size:85%;
  vertical-align: -0.5ex;
  margin-left: -0.2em;
  margin-right: -0.1em;
  line-height: 0;
}
.a {
  text-transform:uppercase;
  font-size:75%;
  vertical-align: 0.45ex;
  margin-left: -0.36em;
  margin-right: -0.15em;
}
.t {
  margin-left: -0.15em;
}
.left {
  position:absolute;
  top:0;
  left:0;
}
.dir {
  text-indent:-32px;
  margin-left:32px;
  margin-right:32px;
}
h1,h2,h3 {
  color:firebrick;
}
address {
  font-size:70%;
  margin-top:2.5em;
  padding-top:.5em;
  border-top:1px solid gray;
}
pre {
  background-color:#eeeeee;
  border: 1px solid #999999;
  padding:.15em;
}
  </style>
</head>
<body>
<img class="left" src="../images/ExTeX-build-side.gif"/>

<h1>The &epsilon;&chi;<span class="t">T</span><span class="e">e</span>X Build System </h1>

<p>
 The &epsilon;&chi;<pan class="t">T</span><span class="e">e</span>X
 build system is run on a regularily basis to regenerate all files
 presented on the &epsilon;&chi;<span class="t">T</span><span
 class="e">e</span>X Web site <a
 href="http://www.extex.org">www.extex.org</a>.
</p>

<h2>Prerequisites</h2>
<p>
 There are a few things to do before the build can be used.
</p>
<ul>
 <li>
   The command <tt>svn</tt> needs to be present on the user's
   execution path. This is the case when Subversion has been installed
   properly.
 </li>
 <li>
   The command <tt>make</tt> needs to be present on the user's
   execution path. This is the case when the development tools on
   Linux have been installed.
 </li>
 <li>
   The command <tt>perl</tt> needs to be present on the user's
   execution path.
 </li>
 <li>
   The command <tt>java</tt> needs to be present on the path. For this
   a JDK has to be present. Currently Java 1.6.0 is used.
 </li>
 <li>
   The command <tt>mvn</tt> needs to be present on the path. This is
   the case after Maven has been installed. Currently the version 3.0.3
   is used.
 </li>
 <li>
   The commands <tt>pdftex</tt> and <tt>makeindex</tt> need to be
   present on the path (for the time being).
 </li>
</ul>


<h2>Getting Things Started</h2>
<p>
 To get things started you need to check out or update the appropriate sources
 from the repository. Next you set some environment variables. And finally you
 execute a script retrieved from the repository. These tasks are automated in
 the following script:
</p>
<pre>
#--------------------------------------------------------------------
# LOCALDIR contains the location where the build resides.
# Here all temporary files are created.
LOCALDIR="/serv/extex-project/build"
#--------------------------------------------------------------------
# INSTALLDIR contains the directory to store the web site in.
INSTALLDIR=/serv/www/extex
#--------------------------------------------------------------------
# Point to the Java SDK
export JAVA_HOME=/serv/extex-project/lib/jdk
#--------------------------------------------------------------------
# Point to Ant
export ANT_HOME=/serv/extex-project/lib/ant/
#--------------------------------------------------------------------
#
LOG=$LOCALDIR/logs/build.log
#--------------------------------------------------------------------
#
export PATH=$JAVA_HOME/bin:$ANT_HOME/bin:$HOME/bin:$PATH

cd $LOCALDIR/trunk
date >$LOG 2>&1

svn update >>$LOG 2>&1

cd build
source src/nightly-build/nightly-build.sh >>$LOG 2>&1
</pre>
<p>
 This script can be found in the repository in
 <tt>build/src/nightly-build/bootstrap.sh</tt>. Since this script
 carries the configuration parameters it needs to be copied onto the
 build machine and adapted. The comments above should be enough to
 fill in the appropriate values.
</p>

<h2>Nightly Build</h2>
<p>
 The nightly build is run on <tt>comedy.dante.de</tt>. It is started
 by a cron script. This cron job is declared in the following manner:
</p>
<pre>
42 1 * * * /serv/extex-project/bin/bootstrap.sh
</pre>

<p>
 To list the cron configuration you can use <tt>crontab -l</tt>.
 To edit the cron configuration you can use <tt>crontab -e</tt>.
</p>

<h2> Build Host</h2>
<p>
Currently the build system for the nightly build is hosted by <a
href="http://www.dante.de">DANTE e.V.</a> The host used is
comedy.dante.de.
</p>

<address>
<font face="helvetica,sans-serif" size="1">
© 2006-2011 <a href="mailto:gene@gerd-neugebauer.de">Gerd Neugebauer</a>
</font>
</address>
</body>
</html>
